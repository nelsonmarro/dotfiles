# nwg-shell Hyprland config file
#
# The nwg-shell-config utility generates a part of settings for you:
# General, Input devices, Touchpad, Dwindle layout, Master layout.
# Decoration, animations, gestures and per-device config are left to be configured by yourself.
# Refer to the Hyprland wiki at https://wiki.hyprland.org for more information.

#
# Monitors & workspaces: nwg-displays generates 2 files, which we include here:
#
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspaces.conf

#
# Autostart. Feel free to add your own entries.
# Shell components will be started in the includes.conf file, which we include below.
#
exec = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = ~/.azotebg-hyprland # Wallpaper
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

#
# Include settings generated by nwg-shell-config
#
source = ~/.config/hypr/includes.conf

#
# All the settings below are up to you. We don't touch them in the shell config utility.
#
# Some default env vars.t
env = XCURSOR_SIZE,24
env = HYPRCURSOR_THEME,Banana
env = HYPRCURSOR_SIZE,24
env = GDK_BACKEND,wayland,x11,*
# env = GDK_SCALE,2
# ----------------
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
# env = WLR_DRM_NO_ATOMIC,1
# env = NVIDIA_ANTI_FLICKER,1
env = QT_QPA_PLATFORMTHEME,kde
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_RECONNECT,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,0
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland

decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    rounding = 5
    blur {
         enabled = true
         size = 3
         passes = 1
         new_optimizations = true
    }
}

animations {
    enabled = true

    # Some default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    workspace_swipe = false
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#executing for more
# device:epic-mouse-v1 {
#     sensitivity = -0.5
# }

windowrule = float,title:^(galculator|org.gnome.Calculator|azote)$
windowrule = idleinhibit fullscreen,class:^.*$$
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more

# Bindings
$mainMod = SUPER
$shiftKey = SHIFT
$alttKey = ALT

# Window control

# Dialogs
bindd = $mainMod, Q, Kill the focused application, killactive
bindd = $mainMod , m, Toggle fullscreen, fullscreen
bindd = $mainMod, f, Toggle floating, togglefloating
bindd = $mainMod, j, Toggle split (dwindle), togglesplit 
bindd = $alttKey $shiftKey, a, Pin window, pin 

# Floating
windowrulev2 = float, class:^(com.github.hluk.copyq)

# Layer rules ########
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, notifications
layerrule = ignorezero, notifications
layerrule = blur, session
layerrule = blur, popup
layerrule = ignorezero,class:GLava

bindd = $mainMod, SPACE, Show keyboard layout, exec, ags -r "showKeyboardLayout()"

# Voice control
bindd = , XF86AudioMute, Toggle mute, exec, pactl set-sink-mute 0 toggle
bindd = , XF86AudioMicMute, Toggle microphone mute, exec, pactl set-source-mute 0 toggle
bindd = , xf86audioraisevolume, Increase volume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bindd = , xf86audiolowervolume, Decrease volume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%

# Media control
bindd = , XF86AudioPlay, Play/Pause, exec, ~/.config/hypr/scripts/playerctl.sh play-pause
bindd = , XF86AudioNext, Next track, exec, ~/.config/hypr/scripts/playerctl.sh next
bindd = , XF86AudioPrev, Previous track, exec, ~/.config/hypr/scripts/playerctl.sh previous
bindd = , XF86AudioStop, Stop playback, exec, ~/.config/hypr/scripts/playerctl.sh stop

# Brightness control
bindd = , xf86monbrightnessup, Increase brightness, exec, brightnessctl set 5%+
bindd = , xf86monbrightnessdown, Decrease brightness, exec, brightnessctl set 5%-

# Applications
bindd = $mainMod, Return, Open Terminal, exec, $term 
bindd = $mainMod, B, Open WebBrowser, exec, $browser
bindd = $mainMod, x, Open Hyprpicker, exec, hyprpicker -a
bind  = $mainMod, V, exec, nwg-clipman
bind  = $mainMod, E, exec, thunar

# Menus
bindd = $mainMod, f1, Toggle main menu, exec, ags -r "toggleMainMenu()"
bindd = $mainMod, f2, Toggle notification center, exec, ags -r "ToggleNotificationCenter()"
bindd = $mainMod, f3, Toggle weather, exec, ags -r "toggleWeather()"
bindd = $mainMod, f4, Toggle monitors menu, exec, ags -r "toggleMonitors()"
bindd = $mainMod, f5, Toggle network menu, exec, ags -r "toggleNetwork()"
bindd = $mainMod, f8, Show calendar menu, exec, ags -r "showCalendarMenu()"
bindd = $mainMod, r, Show application launcher, exec, ags -r "showApplauncher()"
bindd = $mainMod $shiftKey, r, Toggle CopyQ, exec, copyq toggle

# Move focus with mainMod + arrow keys
bindd = $mainMod, left, Move focus left, movefocus, l
bindd = $mainMod, right, Move focus right, movefocus, r
bindd = $mainMod, up, Move focus up, movefocus, u
bindd = $mainMod, down, Move focus down, movefocus, d

# Monitors
bindd = $mainMod, w, Swap window to other monitor, swapwindow, r
bindd = $mainMod $alttKey, 1, Focus monitor 1, focusmonitor, 0
bindd = $mainMod $alttKey, 2, Focus monitor 2, focusmonitor, 1
bindd = $mainMod CONTROL, 1, Move workspace to monitor 1, movecurrentworkspacetomonitor, 0
bindd = $mainMod CONTROL, 2, Move workspace to monitor 2, movecurrentworkspacetomonitor, 1

bindd = $mainMod $alttKey, r, Force renderer reload, forcerendererreload

# Move window with mainMod + shift + arrow keys
bindd = $mainMod SHIFT, left, Move window left, movewindow, l
bindd = $mainMod SHIFT, right, Move window right, movewindow, r
bindd = $mainMod SHIFT, up, Move window up, movewindow, u
bindd = $mainMod SHIFT, down, Move window down, movewindow, d

bindd = $mainMod $alttKey, left, Decrease split ratio, splitratio, -0.05
bindd = $mainMod $alttKey, right, Increase split ratio, splitratio, 0.05

# Navigation
bindd = $mainMod, Escape, Go to previous workspace, workspace, previous
# Switch workspaces with mainMod + [0-9]
bindd = $mainMod, h, Toggle special workspace, togglespecialworkspace
bindd = $mainMod, 1, Go to workspace 1, workspace, 1
bindd = $mainMod, 2, Go to workspace 2, workspace, 2
bindd = $mainMod, 3, Go to workspace 3, workspace, 3
bindd = $mainMod, 4, Go to workspace 4, workspace, 4
bindd = $mainMod, 5, Go to workspace 5, workspace, 5
bindd = $mainMod, 6, Go to workspace 6, workspace, 6
bindd = $mainMod, 7, Go to workspace 7, workspace, 7
bindd = $mainMod, 8, Go to workspace 8, workspace, 8
bindd = $mainMod, 9, Go to workspace 9, workspace, 9
bindd = $mainMod, 0, Go to workspace 10, workspace, 10

# MINIMIZE 
# bindd = $mainMod, n, Move to workspace 11 (silent), movetoworkspacesilent, 11
bindd = $mainMod, n, Minimize window, exec, sh ~/dotfiles/.config/hypr/scripts/minimiz.sh
bindd = $mainMod CONTROL, n, Get minimized windows, exec, sh ~/dotfiles/.config/hypr/scripts/get_minimized.sh

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bindd = $mainMod SHIFT, 1, Move window to workspace 1, movetoworkspace, 1
bindd = $mainMod SHIFT, 2, Move window to workspace 2, movetoworkspace, 2
bindd = $mainMod SHIFT, 3, Move window to workspace 3, movetoworkspace, 3
bindd = $mainMod SHIFT, 4, Move window to workspace 4, movetoworkspace, 4
bindd = $mainMod SHIFT, 5, Move window to workspace 5, movetoworkspace, 5
bindd = $mainMod SHIFT, 6, Move window to workspace 6, movetoworkspace, 6
bindd = $mainMod SHIFT, 7, Move window to workspace 7, movetoworkspace, 7
bindd = $mainMod SHIFT, 8, Move window to workspace 8, movetoworkspace, 8
bindd = $mainMod SHIFT, 9, Move window to workspace 9, movetoworkspace, 9
bindd = $mainMod SHIFT, 0, Move window to workspace 10,movetoworkspace, 10
# bindd = $mainMod , n, Toggle fullscreen, fullscreen, 1

# Scroll through existing workspaces with mainMod + scroll
bindd = $mainMod, mouse_down, Scroll to next workspace, workspace, e+1
bindd = $mainMod, mouse_up, Scroll to previous workspace, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
binddm = $mainMod, mouse:272, Move window, movewindow
binddm = $mainMod, mouse:273, Resize window, resizewindow

bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

# bindd = $mainMod,b, Send window to bottom layer, exec, hyprctl dispatch layer bottom
bindd = $mainMod, b, Send focused window to bottom layer, exec, hyprctl dispatch layer "bottom" focused
bind = $mainMod $alttKey, s, exec, systemctl suspend

# SCREENSHOT (/usr/local/bin/screenshot)
bind = , Print, exec, screenshot fullscreen                           # full screen
bind = CONTROL, Print, exec, screenshot display                       # focused display
bind = $alttKey, Print, exec, screenshot focused        # focused window
bind = SHIFT, Print, exec, screenshot swappy                  # selected region -> swappy
source = ~/.config/hypr/hud.conf
